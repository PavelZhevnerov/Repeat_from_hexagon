function playGame(){function e(e){gainNodes[e].gain.linearRampToValueAtTime(A,audioCtx.currentTime+N),D.currPush=$("#"+e),D.currPush.addClass("light")}function t(){D.currPush&&D.currPush.removeClass("light"),gainNodes.forEach(function(e){e.gain.linearRampToValueAtTime(0,audioCtx.currentTime+N)}),D.currPush=void 0,D.currOsc=void 0}function n(){errNode.gain.linearRampToValueAtTime(A,audioCtx.currentTime+N)}function r(){errNode.gain.linearRampToValueAtTime(0,audioCtx.currentTime+N)}function i(e,t){t=t||0;setTimeout(function(){y.text(e)},t)}function o(){(v=$("input[name=diff]:checked").val())||(v=15)}function a(){h(),t(),r(),x.text("--").removeClass("led-off"),c("--",1),D.init(),p(),o()}function s(e){var t=[1250,1e3,750,500];return e<4?t[0]:e<8?t[1]:e<12?t[2]:t[3]}function u(e){D.lock=!0,E.removeClass("clickable").addClass("unclickable"),n(),i("You are wrong!"),e&&e.addClass("light"),D.toHndl=setTimeout(function(){r(),e&&e.removeClass("light"),D.toHndlSt=setTimeout(function(){D.strict?a():d()},1e3)},1e3),c("!!",2)}function l(){var n=0,r=D.lastPush.attr("id");D.seqHndl=setInterval(function(){e(r),D.toHndl=setTimeout(t,80),8===++n&&clearInterval(D.seqHndl)},160),c("**",2),i("You win!!!")}function c(e,t){x.text(e);var n=function(){x.addClass("led-off"),D.toHndlFl=setTimeout(function(){x.removeClass("led-off")},250)},r=0;n(),D.flHndl=setInterval(function(){n(),++r===t&&clearInterval(D.flHndl)},500)}function f(){var e=D.count<10?"0":"";x.text(e+(D.count+""))}function d(){i("Listen to me!");var n=0;D.index=0,D.seqHndl=setInterval(function(){f(),D.lock=!0,e(D.sequence[n]),D.toHndl=setTimeout(t,D.timeStep/2-10),++n===D.sequence.length&&(clearInterval(D.seqHndl),E.removeClass("unclickable").addClass("clickable"),D.lock=!1,i("Repeat after me!",1e3),D.toHndl=setTimeout(u,5*D.timeStep))},D.timeStep)}function p(){D.timeStep=s(D.count++),D.sequence.push(Math.floor(6*Math.random())),D.toHndl=setTimeout(d,500)}function h(){clearInterval(D.seqHndl),clearInterval(D.flHndl),clearTimeout(D.toHndl),clearTimeout(D.toHndlFl),clearTimeout(D.toHndlSt)}function g(t){if(!D.lock){clearTimeout(D.toHndl);var n=t.attr("id");n==D.sequence[D.index]&&D.index<D.sequence.length?(e(n),D.lastPush=t,D.index++,D.index<D.sequence.length?D.toHndl=setTimeout(u,5*D.timeStep):D.index==v?(E.removeClass("clickable").addClass("unclickable"),D.toHndl=setTimeout(l,D.timeStep)):(E.removeClass("clickable").addClass("unclickable"),p())):(E.removeClass("clickable").addClass("unclickable"),u(t))}}function m(){T.toggleClass("led-on"),D.strict=!D.strict}var v,y=$("#info"),x=$(".count"),b=$("#start"),w=$("#mode"),T=$("#mode-led"),C=$(".sw-slot"),k=$("#pwr-sw"),E=$(".hex-btn"),S=$(".btn"),N=.05,A=.5,D={};D.reset=function(){this.init(),this.strict=!1},D.init=function(){this.lastPush=$("#0"),this.sequence=[],this.tStepInd=0,this.index=0,this.count=0,this.lock=!1},E.mousedown(function(){g($(this))}),$("*").mouseup(function(e){e.stopPropagation(),D.lock||t()}),C.click(function(){k.toggleClass("sw-on"),0==k.hasClass("sw-on")?(i("Click on the switch!"),D.reset(),x.text("--"),x.addClass("led-off"),T.removeClass("led-on"),E.removeClass("clickable").addClass("unclickable"),b.off("click"),w.off("click"),S.removeClass("unclickable").addClass("clickable"),h(),t(),r()):(o(),i("Let's start!"),S.removeClass("unclickable").addClass("clickable"),x.removeClass("led-off"),b.click(a),w.click(m))}),D.reset()}$(document).ready(function(){window.AudioContext||window.webkitAudioContext||!1?playGame():alert("Sorry, but the Web Audio API is not supported by your browser. Please, consider downloading the latest version of Google Chrome or Mozilla Firefox")});var audioCtx=new AudioContext,frequencies=[329.63,261.63,220,164.81,360.24,198.57],errOsc=audioCtx.createOscillator();errOsc.type="triangle",errOsc.frequency.value=110,errOsc.start(0);var errNode=audioCtx.createGain();errOsc.connect(errNode),errNode.gain.value=0,errNode.connect(audioCtx.destination);var oscillators=frequencies.map(function(e){var t=audioCtx.createOscillator();return t.type="sine",t.frequency.value=e,t.start(0),t}),gainNodes=oscillators.map(function(e){var t=audioCtx.createGain();return e.connect(t),t.connect(audioCtx.destination),t.gain.value=0,t});